import{r as v,c as x}from"./index-c52ed0a9.js";var I=new Map,l=new WeakMap,p=0,C=void 0;function M(e){return e?(l.has(e)||(p+=1,l.set(e,p.toString())),l.get(e)):"0"}function O(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?M(e.root):e[t]}`).toString()}function T(e){let t=O(e),s=I.get(t);if(!s){const o=new Map;let u;const i=new IntersectionObserver(n=>{n.forEach(r=>{var c;const h=r.isIntersecting&&u.some(d=>r.intersectionRatio>=d);e.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=h),(c=o.get(r.target))==null||c.forEach(d=>{d(h,r)})})},e);u=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),s={id:t,observer:i,elements:o},I.set(t,s)}return s}function _(e,t,s={},o=C){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const c=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:typeof s.threshold=="number"?s.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:u,observer:i,elements:n}=T(s);let r=n.get(e)||[];return n.has(e)||n.set(e,r),r.push(t),i.observe(e),function(){r.splice(r.indexOf(t),1),r.length===0&&(n.delete(e),i.unobserve(e)),n.size===0&&(i.disconnect(),I.delete(u))}}function B({threshold:e,delay:t,trackVisibility:s,rootMargin:o,root:u,triggerOnce:i,skip:n,initialInView:r,fallbackInView:c,onChange:h}={}){var d;const[g,y]=v.useState(null),b=v.useRef(),[w,A]=v.useState({inView:!!r,entry:void 0});b.current=h,v.useEffect(()=>{if(n||!g)return;let a;return a=_(g,(V,S)=>{A({inView:V,entry:S}),b.current&&b.current(V,S),S.isIntersecting&&i&&a&&(a(),a=void 0)},{root:u,rootMargin:o,threshold:e,trackVisibility:s,delay:t},c),()=>{a&&a()}},[Array.isArray(e)?e.toString():e,g,u,o,i,n,s,c,t]);const R=(d=w.entry)==null?void 0:d.target,E=v.useRef();!g&&R&&!i&&!n&&E.current!==R&&(E.current=R,A({inView:!!r,entry:void 0}));const f=[y,w.inView,w.entry];return f.ref=f[0],f.inView=f[1],f.entry=f[2],f}function $(e,t=.75){const s=window.innerWidth<=1024,{ref:o,inView:u}=B({threshold:s?.1:t}),{setActiveSection:i,timeOfLastClick:n}=x();return v.useEffect(()=>{u&&Date.now()-n>1e3&&i(e)},[u,i,n,e]),{ref:o}}export{$ as u};
